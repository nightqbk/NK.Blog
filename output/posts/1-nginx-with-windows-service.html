<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>My Blog - &#x5C06;Nginx&#x5C01;&#x88C5;&#x4E3A;Windows&#x670D;&#x52A1;&#x5E76;&#x81EA;&#x542F;&#x52A8; my theme</title>
  <meta name="description" content="Welcome!" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">    

    <link type="application/rss+xml" rel="alternate" title="My Blog" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="My Blog" href="/feed.atom" />

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">


 <link rel="stylesheet" href="/assets/css/googleapifont.css">
 <link rel="stylesheet" href="/assets/css/font-awesome.min.css">

  <link href="/assets/css/main.css" rel="stylesheet" />
  <link href="/assets/css/custom.css" rel="stylesheet" />

  <meta name="application-name" content="My Blog" />
  <meta name="msapplication-tooltip" content="My Blog" />
  <meta name="msapplication-starturl" content="/" />

  <meta property="og:title" content="My Blog - &#x5C06;Nginx&#x5C01;&#x88C5;&#x4E3A;Windows&#x670D;&#x52A1;&#x5E76;&#x81EA;&#x542F;&#x52A8;" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://nightk.me/posts/1-nginx-with-windows-service" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="/assets/js/html5shiv.js"></script>
      <script src="/assets/js/respond.min.js"></script>
    <![endif]-->
</head>
 

  <body>
    <div class="sidenav">
  <a class="closebtn"><i class="fa fa-times"></i></a>
  <h2><a class="" href="/"><span>Welcome!</span></a></h2>
                <a class="" href="/about"><span>About Me</span></a>
</div>
<a class="nav openbtn">
      <i class="fa fa-bars fa-2x"></i>
    </a>
    
    
    <main role="main" class="🏆">

      <article>

  <header class="section-padding--lg mast rellax" data-rellax-speed="-4">
    <a class="nav nav--white" href="/">
      <i class="fa fa-lg fa-arrow-left"></i>
      <span>Back to Posts</span>
    </a>
    <figure class="absolute-bg mast__img" style="background-image: url('/assets/images/background.jpg');"></figure>
    <div class="mast__container">
      <span><time datetime="YYYY-02-DD">09 February 2019</time></span>
       <h1>&#x5C06;Nginx&#x5C01;&#x88C5;&#x4E3A;Windows&#x670D;&#x52A1;&#x5E76;&#x81EA;&#x542F;&#x52A8;</h1>   
              <span>
                    <a class="nav--white" href="/tags/nginx">nginx</a>
        </span>
    </div>
  </header>
  <section class="section-padding bg-grey">
    <div class="post">
      <blockquote class="blockquote">
<p>项目地址：
<a href="https://github.com/kohsuke/winsw">https://github.com/kohsuke/winsw</a></p>
</blockquote>
<blockquote class="blockquote">
<p>下载地址：<br />
<a href="http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw">http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw</a></p>
</blockquote>
<h3 id="section">安装步骤</h3>
<ul>
<li>Step1. 下载小工具。</li>
<li>Step2. 将小工具重命名为 nginx-service.exe</li>
<li>Step3. 创建配置文件nginx-service.xml（名字要和工具名一样)</li>
<li>Step4. 创建nginx-service.exe.config（为支持NET 4.0 runtime，默认只支持NET 2.0 runtime）</li>
<li>Step5. 运行安装命令</li>
<li>Step6. 在windows 服务中检查是否启动成功</li>
</ul>
<h3 id="section-1">图示</h3>
<h4 id="windows">Windows 服务</h4>
<p><img src="./images/nginx-with-windows-service/windowsservice.png" class="img-fluid" alt="windows service" /></p>
<h4 id="section-2">文件结构格式如下</h4>
<p><img src="./images/nginx-with-windows-service/filestruct.png" class="img-fluid" alt="windows service" /></p>
<h3 id="section-3">配置内容</h3>
<h4 id="nginx-service.xml">nginx-service.xml 内容如下</h4>
<pre><code>&lt;service&gt;
  &lt;id&gt;nginx&lt;/id&gt;   
  &lt;name&gt;Nginx Service&lt;/name&gt;   
  &lt;description&gt;High Performance Nginx Service&lt;/description&gt;   
  &lt;logpath&gt;D:\Portable\nginx-1.16.1\logs&lt;/logpath&gt;   
  &lt;log mode=&quot;roll-by-size&quot;&gt;
    &lt;sizeThreshold&gt;10240&lt;/sizeThreshold&gt;    
    &lt;keepFiles&gt;8&lt;/keepFiles&gt;  
  &lt;/log&gt;  
  &lt;executable&gt;D:\Portable\nginx-1.16.1\nginx.exe&lt;/executable&gt;  
  &lt;startarguments&gt;-p D:\Portable\nginx-1.16.1\nginx&lt;/startarguments&gt;  
  &lt;stopexecutable&gt;D:\Portable\nginx-1.16.1\nginx.exe&lt;/stopexecutable&gt;
  &lt;stoparguments&gt;-p D:\Portable\nginx-1.16.1\nginx -s stop&lt;/stoparguments&gt;
&lt;/service&gt;
</code></pre>
<h4 id="nginx-service.exe.config">nginx-service.exe.config</h4>
<pre><code>&lt;configuration&gt;
   &lt;startup&gt;
     &lt;supportedRuntime version=&quot;v2.0.50727&quot; /&gt;    
     &lt;supportedRuntime version=&quot;v4.0&quot; /&gt;  
  &lt;/startup&gt;
  &lt;runtime&gt;
     &lt;generatePublisherEvidence enabled=&quot;false&quot;/&gt;   
  &lt;/runtime&gt;
&lt;/configuration&gt;
</code></pre>
<h4 id="cmdwindows">在cmd中运行如下命令安装windows服务</h4>
<pre><code>nginx-service.exe install  #安装Windows服务
nginx-service.exe uninstall  #卸载Windows服务
 
nginx-service.exe start  #启动Windows服务
nginx-service.exe stop  #停止Windows服务
</code></pre>
<h3 id="section-4">注意问题：</h3>
<p>有可能会启动不成功， 这个时候可以到nginx 的日志中查看启动失败原因
很有可能是80端口被占用</p>
 
    </div>
          
  </section>

</article>

<footer class="section-padding--sm footer">
  <span>
  </span>
  <ul class="footer__social">
    <li><a class="fa fa-lg fa-rss" href="/feed.rss" target="_blank"></a></li>
  </ul>
</footer>


    </main>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/rellax/1.0.0/rellax.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/nav.js"></script>
 

  </body>
</html>

