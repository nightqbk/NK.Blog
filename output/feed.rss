<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
	<channel>
		<title>My Blog</title>
		<link>http://nightk.me/</link>
		<description>Welcome!</description>
		<copyright>2019</copyright>
		<pubDate>Sun, 22 Sep 2019 14:18:42 GMT</pubDate>
		<lastBuildDate>Sun, 22 Sep 2019 14:18:42 GMT</lastBuildDate>
		<item>
			<title>将Nginx封装为Windows服务并自启动</title>
			<link>http://nightk.me/posts/1-nginx-with-windows-service</link>
			<description>&lt;p&gt;项目地址：
&lt;a href="https://github.com/kohsuke/winsw"&gt;https://github.com/kohsuke/winsw&lt;/a&gt;&lt;/p&gt;</description>
			<guid>http://nightk.me/posts/1-nginx-with-windows-service</guid>
			<pubDate>Sat, 09 Feb 2019 00:00:00 GMT</pubDate>
			<content:encoded>&lt;blockquote class="blockquote"&gt;
&lt;p&gt;项目地址：
&lt;a href="https://github.com/kohsuke/winsw"&gt;https://github.com/kohsuke/winsw&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote class="blockquote"&gt;
&lt;p&gt;下载地址：&lt;br /&gt;
&lt;a href="http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw"&gt;http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="section"&gt;安装步骤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Step1. 下载小工具。&lt;/li&gt;
&lt;li&gt;Step2. 将小工具重命名为 nginx-service.exe&lt;/li&gt;
&lt;li&gt;Step3. 创建配置文件nginx-service.xml（名字要和工具名一样)&lt;/li&gt;
&lt;li&gt;Step4. 创建nginx-service.exe.config（为支持NET 4.0 runtime，默认只支持NET 2.0 runtime）&lt;/li&gt;
&lt;li&gt;Step5. 运行安装命令&lt;/li&gt;
&lt;li&gt;Step6. 在windows 服务中检查是否启动成功&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="section-1"&gt;图示&lt;/h3&gt;
&lt;h4 id="windows"&gt;Windows 服务&lt;/h4&gt;
&lt;p&gt;&lt;img src="./images/nginx-with-windows-service/windowsservice.png" class="img-fluid" alt="windows service" /&gt;&lt;/p&gt;
&lt;h4 id="section-2"&gt;文件结构格式如下&lt;/h4&gt;
&lt;p&gt;&lt;img src="./images/nginx-with-windows-service/filestruct.png" class="img-fluid" alt="windows service" /&gt;&lt;/p&gt;
&lt;h3 id="section-3"&gt;配置内容&lt;/h3&gt;
&lt;h4 id="nginx-service.xml"&gt;nginx-service.xml 内容如下&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;service&amp;gt;
  &amp;lt;id&amp;gt;nginx&amp;lt;/id&amp;gt;   
  &amp;lt;name&amp;gt;Nginx Service&amp;lt;/name&amp;gt;   
  &amp;lt;description&amp;gt;High Performance Nginx Service&amp;lt;/description&amp;gt;   
  &amp;lt;logpath&amp;gt;D:\Portable\nginx-1.16.1\logs&amp;lt;/logpath&amp;gt;   
  &amp;lt;log mode=&amp;quot;roll-by-size&amp;quot;&amp;gt;
    &amp;lt;sizeThreshold&amp;gt;10240&amp;lt;/sizeThreshold&amp;gt;    
    &amp;lt;keepFiles&amp;gt;8&amp;lt;/keepFiles&amp;gt;  
  &amp;lt;/log&amp;gt;  
  &amp;lt;executable&amp;gt;D:\Portable\nginx-1.16.1\nginx.exe&amp;lt;/executable&amp;gt;  
  &amp;lt;startarguments&amp;gt;-p D:\Portable\nginx-1.16.1\nginx&amp;lt;/startarguments&amp;gt;  
  &amp;lt;stopexecutable&amp;gt;D:\Portable\nginx-1.16.1\nginx.exe&amp;lt;/stopexecutable&amp;gt;
  &amp;lt;stoparguments&amp;gt;-p D:\Portable\nginx-1.16.1\nginx -s stop&amp;lt;/stoparguments&amp;gt;
&amp;lt;/service&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id="nginx-service.exe.config"&gt;nginx-service.exe.config&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
   &amp;lt;startup&amp;gt;
     &amp;lt;supportedRuntime version=&amp;quot;v2.0.50727&amp;quot; /&amp;gt;    
     &amp;lt;supportedRuntime version=&amp;quot;v4.0&amp;quot; /&amp;gt;  
  &amp;lt;/startup&amp;gt;
  &amp;lt;runtime&amp;gt;
     &amp;lt;generatePublisherEvidence enabled=&amp;quot;false&amp;quot;/&amp;gt;   
  &amp;lt;/runtime&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id="cmdwindows"&gt;在cmd中运行如下命令安装windows服务&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;nginx-service.exe install  #安装Windows服务
nginx-service.exe uninstall  #卸载Windows服务
 
nginx-service.exe start  #启动Windows服务
nginx-service.exe stop  #停止Windows服务
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="section-4"&gt;注意问题：&lt;/h3&gt;
&lt;p&gt;有可能会启动不成功， 这个时候可以到nginx 的日志中查看启动失败原因
很有可能是80端口被占用&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>First Post</title>
			<link>http://nightk.me/posts/first-post</link>
			<description>&lt;p&gt;This is my first post!&lt;/p&gt;</description>
			<guid>http://nightk.me/posts/first-post</guid>
			<pubDate>Fri, 01 Jan 2016 00:00:00 GMT</pubDate>
			<content:encoded>&lt;p&gt;This is my first post!&lt;/p&gt;
</content:encoded>
		</item>
	</channel>
</rss>